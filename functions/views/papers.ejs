<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap" rel="stylesheet">
        <!-- <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous"> -->
        <link rel="stylesheet" href="./css/styles.css">
        <title>G-Port</title>
    </head>

    <body>
        <button onclick="window.location.href = '/' "class="back">Home</button>
        <hr>
        <form action="/search" method="get">
            <input type="text" name="query" placeholder="Search..." required value="<%= typeof searchQuery !== 'undefined' ? searchQuery : '' %>">
            <button type="submit">Search</button>
        </form>
      
        <div class="response-area">
            <% if (papers && papers.length > 0) { %>
                <% papers.forEach(paper => { %>
                    <div class="paper-card">
                        <h2><%= paper.title %></h2>
                        <p class="abstract"><%= paper.abstract %></p>
                        <p class="year">Year Published: <%= paper.yearPublished %></p>
                        <p class="document-type">Document Type: <%= paper.documentType %></p>
                        <div class="paper-links">
                            <% if (paper.downloadUrl) { %>
                                <a href="<%= paper.downloadUrl %>" target="_blank" class="download-button">Download PDF</a>
                            <% } %>
                            <% if (paper.readerUrl) { %>
                                <a href="<%= paper.readerUrl %>" target="_blank" class="reader-button">Read Online</a>
                            <% } %>
                        </div>
                    </div>
                <% }) %>
          <% } else { %>
            <p>Search for a Free to access Paper!</p>
          <% } %>
      </div>
      </body>
      <footer>
        <div class="citation">
          <h3>Citation</h3>
          <p>Knoth, P., Herrmannova, D., Cancellieri, M. et al. CORE: A Global Aggregation Service for Open Access Papers. Nature Scientific Data 10, 366 (2023). <a href="https://doi.org/10.1038/s41597-023-02208-w">https://doi.org/10.1038/s41597-023-02208-w</a></p>
        </div>
      </footer>
